<section>
  <div ng-if="vm.examsession._id && !vm.examsession.$resolved" class="loading">
    <span class="glyphicon glyphicon-refresh glyphicon-refresh-animate"></span> {{'LOADING' | translate}}
  </div>

  <div ng-if="!vm.examsession._id || vm.examsession.$resolved">
    <ol class="breadcrumb">
      <li><a ui-sref="manage.examsessions.list" ng-bind="'EXAMSESSION.EXAMSESSIONS' | translate"></a></li>
      <li ng-if="!vm.examsession._id" class="active"><a ui-sref="manage.examsessions.create" ng-bind="'GENERAL.CREATE' | translate"></a></li>
      <li ng-if="vm.examsession._id"><a ui-sref="manage.examsessions.view({ examsessionCode: vm.examsession.code })" ng-bind="vm.examsession.code"></a></li>
      <li ng-if="vm.examsession._id" class="active"><a ui-sref="manage.examsessions.edit({ examsessionCode: vm.examsession.code })" ng-bind="'GENERAL.EDIT' | translate"></a></li>
    </ol>

    <h2><span ng-if="vm.examsession._id" ng-bind="vm.examsessionname"></span><span ng-if="!vm.examsession._id" ng-bind="'EXAMSESSION.CREATE' | translate"></span></h2>

    <div class="col-md-12">
      <form name="vm.form.examsessionForm" class="form-horizontal" ng-submit="vm.save(vm.form.examsessionForm.$valid)" novalidate>
        <fieldset>
          <div class="form-group" show-errors>
            <label class="control-label" for="code" ng-bind="'EXAMSESSION.CODE' | translate"></label>
            <input name="code" type="text" ng-model="vm.examsession.code" id="code" class="form-control" placeholder="{{'EXAMSESSION.CODE' | translate}}" required ng-disabled="vm.examsession._id" />
            <div ng-messages="vm.form.examsessionForm.code.$error" role="alert">
              <p class="help-block error-text" ng-message="required" ng-bind="'EXAMSESSION.CODE_ERROR' | translate"></p>
            </div>
          </div>
          <div class="form-group" show-errors>
            <label class="control-label" for="name" ng-bind="'EXAMSESSION.NAME' | translate"></label>
            <input name="name" type="text" ng-model="vm.examsession.name" id="name" class="form-control" placeholder="{{'EXAMSESSION.NAME' | translate}}" required />
            <div ng-messages="vm.form.examsessionForm.name.$error" role="alert">
              <p class="help-block error-text" ng-message="required" ng-bind="'EXAMSESSION.NAME_ERROR' | translate"></p>
            </div>
          </div>
          <div class="form-group">
            <label class="control-label" for="description" ng-bind="'EXAMSESSION.DESCRIPTION' | translate"></label>
            <textarea name="description" ng-model="vm.examsession.description" id="description" class="form-control" cols="30" rows="5" placeholder="{{'EXAMSESSION.DESCRIPTION' | translate}}"></textarea>
          </div>
          <div class="form-group" show-errors>
            <label class="control-label" for="start" ng-bind="'EXAMSESSION.START' | translate"></label>
            <div class="controls">
              <div class="dropdown">
                <a class="dropdown-toggle" id="startDropdown" role="button" data-toggle="dropdown" data-target="#" href="#">
                  <div class="input-group">
                    <input name="start" type="date" ng-model="vm.examsession.start" id="start" class="form-control" placeholder="{{'EXAMSESSION.START' | translate}}" required /><span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span></div>
                </a>
                <ul class="dropdown-menu" role="menu" aria-labelledby="startLabel">
                  <datetimepicker ng-model="vm.examsession.start" data-datetimepicker-config="{ dropdownSelector: '#startDropdown', startView:'day', minView:'day' }"></datetimepicker>
                </ul>
              </div>
            </div>
            <div ng-messages="vm.form.examsessionForm.start.$error" role="alert">
              <p class="help-block error-text" ng-message="required" ng-bind="'EXAMSESSION.START_ERROR' | translate"></p>
            </div>
          </div>
          <div class="form-group" show-errors>
            <label class="control-label" for="end" ng-bind="'EXAMSESSION.END' | translate"></label>
            <div class="controls">
              <div class="dropdown">
                <a class="dropdown-toggle" id="endDropdown" role="button" data-toggle="dropdown" data-target="#" href="#">
                  <div class="input-group">
                    <input name="end" type="date" ng-model="vm.examsession.end" id="end" class="form-control" placeholder="{{'EXAMSESSION.END' | translate}}" required /><span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span></div>
                </a>
                <ul class="dropdown-menu" role="menu" aria-labelledby="endLabel">
                  <datetimepicker ng-model="vm.examsession.end" data-datetimepicker-config="{ dropdownSelector: '#endDropdown', startView:'day', minView:'day' }"></datetimepicker>
                </ul>
              </div>
            </div>
            <div ng-messages="vm.form.examsessionForm.end.$error" role="alert">
              <p class="help-block error-text" ng-message="required" ng-bind="'EXAMSESSION.END_ERROR' | translate"></p>
            </div>
          </div>
          <div class="form-group">
            <button type="submit" class="btn btn-primary">{{vm.examsession._id ? 'GENERAL.UPDATE' : 'GENERAL.CREATE' | translate}}</button>
          </div>
          <div ng-show="vm.error" class="text-danger">
            <strong ng-bind="vm.error"></strong>
          </div>
        </fieldset>
      </form>
    </div>
  </div>
</section>
